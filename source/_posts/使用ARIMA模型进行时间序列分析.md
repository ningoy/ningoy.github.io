什么是ARIMA模型？ARIMA模型的全称是自回归移动平均模型（ARIMA，Autoregressive Integrated Moving Average Model），是统计模型中最常见的一种用来进行时间序列预测的模型。

ARIMA模型的优缺点，优点是模型十分简单，只需要内生变量而不需要借助其他外生变量。以最简单的模型 Y = aX + b 为例，X 是自变量，Y是因变量，a 和 b 都是外生变量，是由模型的外部因素决定的。

缺点：

1. 要求时序数据是稳定的（stationary），或者通过差分化（differencing）后是稳定的。
2. 本质上只能捕捉线性关系，而不能捕捉非线性关系。

那么要如何判断时序数据是稳定的呢？

一个时间序列的随机变量是稳定的，当且仅当它的统计特征都是独立于时间的（是关于时间的常量）。

1. 稳定的数据是没有趋势（trend），没有周期性（seasonality）的；即它的均值，在时间轴上拥有常量的振幅，并且它的方差，在时间轴上是趋于同一个稳定的值的。
2. 可以用Dickey-Fuller Test 进行假设检验。

ARIMA的参数与数学形式

ARIMA模型有三个参数p,d,q

+ p -- 代表预测模型中采用的时序数据本身的滞后数（lags），也叫做AR/Auto-Regressive项。
+ d -- 代表时序数据需要进行几阶差分化才是稳定的，也叫Integrated项。
+ q -- 代表预测模型中采用的预测误差的滞后数（lags），也叫MA/Moving Average项。

差分 -- 假设y表示t时刻的Y的差分

ARIMA的预测模型可以表示为：

Y的预测值 = 常量c and/or 一个或多个最近时间的Y的加权 and/or 一个或多个最近时间的预测误差。

假设p,q,d已知：

ARIMA用数学形式表示为:
$$
ytˆ=μ+ϕ1∗yt−1+...+ϕp∗yt−p+θ1∗et−1+...+θq∗et−q
其中,ϕ表示AR的系数，θ表示MA的系数
$$
ARIMA模型的几个特例

1. ARIMA(0,1,0) = random walk:

   当d=1,p 和 q 为0 时，叫做random walk，每一个时刻的Y，只与上一时刻的Y有关。
   $$
   Yˆt=μ+Yt−1
   $$

2. ARIMA(1,0,0) = first-order autoregressive model:

   当p=1,d=0,q=0,说明时序数据是稳定的和自相关的。一个时刻的Y值只与上一个时刻的Y值有关
   $$
   Yˆt=μ+ϕ1∗Yt−1.where, ϕ∈[−1,1],是一个斜率系数
   $$

3. ARIMA(1,1,0) = differenced first-order autoregressive model:
   p=1,d=1,q=0. 说明时序数据在一阶差分化之后是稳定的和自回归的。即一个时刻的差分（y）只与上一个时刻的差分有关。
   $$
   yˆt=μ+ϕ1∗yt−1结合一阶差分的定义，也可以表示为：Yˆt−Yt−1=μ+ϕ1∗(Yt−1−Yt−2)或者Yˆt=μ+Yt−1+ϕ1∗(Yt−1−Yt−2)
   $$
   

4. ARIMA(0,1,1) = simple exponential smoothing with growth.
  p=0, d=1 ,q=1.说明数据在一阶差分后市稳定的和移动平均的。即一个时刻的估计值的差分与上一个时刻的预测误差有关。
  $$
  yˆt=μ+α1∗et−1注意q=1的差分yt与p=1的差分yt的是不一样的其中，yˆt=Yˆt−Yˆt−1, et−1=Yt−1−Yˆt−1,设θ1=1−α1则也可以写成：Yˆt=μ+Yˆt−1+α1(Yt−1−Yˆt−1)=μ+Yt−1−θ1∗et−1
  $$

5. ARIMA(2,1,2)
   在通过上面的例子，可以很轻松的写出它的预测模型：
   $$
   yˆt=μ+ϕ1∗yt−1+ϕ2∗yt−2−θ1∗et−1−θ2∗et−2也可以写成:Yˆt=μ+ϕ1∗(Yt−1−Yt−2)+ϕ2∗(Yt−2−Yt−3)−θ1∗(Yt−1−Yˆt−1)−θ2∗(Yt−2−Yˆt−2)
   $$

6. ARIMA(2,2,2)
   $$
   
   yˆt=μ+ϕ1∗yt−1+ϕ2∗yt−2−θ1∗et−1−θ2∗et−2Yˆt=μ+ϕ1∗(Yt−1−2Yt−2+Yt−3)+ϕ2∗(Yt−2−2Yt−3+Yt−4)−θ1∗(Yt−1−Yˆt−1)−θ2∗(Yt−2−Yˆt−2)
   $$

ARIMA建模基本步骤

1. 获取被观测系统时间序列数据；
2. 对数据绘图，观测是否为平稳时间序列；对于非平稳时间序列要先进行d阶差分运算，化为平稳时间序列；
3. 经过第二步处理，已经得到平稳时间序列。要对平稳时间序列分别求得其自相关系数ACF 和偏自相关系数PACF，通过对自相关图和偏自相关图的分析，得到最佳的阶层 p 和阶数 q
4. 由以上得到的d、q、p，得到ARIMA模型。然后开始对得到的模型进行模型检验。

